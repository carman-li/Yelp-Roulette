(this["webpackJsonpyelp-roulette"]=this["webpackJsonpyelp-roulette"]||[]).push([[0],{11:function(e,t,a){},13:function(e,t,a){e.exports=a(19)},19:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(12),i=a.n(c),r=(a(11),a(7)),l=a.n(r),o=a(8),u=a(2),d=a(3),m=a(5),h=a(4),p=a(1),f=a(6),b=a(9),g=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendData=function(){a.props.callback(a.state.data)},a.sendHidden=function(){a.props.callbackTwo(!a.state.isHidden)},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.setState(Object(b.a)({},e.target.name,e.target.value)),a.componentDidMount(),a.sendHidden()},a.state={data:[],total:"",search:"",radius:5e3,limit:50,offset:0,isHidden:!0},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.sendData=a.sendData.bind(Object(p.a)(a)),a.sendHidden=a.sendHidden.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,a,n,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search"),a=Math.floor(50*Math.random())+1,n={search:this.state.search,latitude:this.props.latitude,longitude:this.props.longitude,radius:this.state.radius,limit:this.state.limit,offset:a},Object.keys(n).forEach((function(e){return t.searchParams.append(e,n[e])})),e.next=6,fetch(t,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat("-dgCuXXtfgMGUdr3YCI8c1mRun4x5kmGwQ6MTHaqKnZzDmlp6yAtroO6NX4DWMvxViQPp7fJmoouXTN_IGQmOUhRxeFXnE6KB_ciy0VyccPna4PPYLSLe0iOUckjXXYx")}}).catch((function(e){console.log("Looks like there was a problem: \n ".concat(e))}));case 6:return s=e.sent,e.next=9,s.json().catch((function(e){console.log("Looks like there was a problem: \n ".concat(e))}));case 9:c=e.sent,this.setState({data:c.businesses}),this.sendData();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("h3",null,"You are searching for: "),s.a.createElement("h3",null,this.state.search),s.a.createElement("input",{className:"field btn btn-outline-light",type:"text",placeholder:"i.e. vegan, fries...",name:"search",value:this.state.search,onChange:this.handleChange}),s.a.createElement("input",{className:"btn btn-outline-light",type:"submit"})),s.a.createElement("div",{className:"instructions"},s.a.createElement("h5",null,"How to Use Yelp Roulette:"),s.a.createElement("ol",null,s.a.createElement("li",null,"OPTIONAL: Enter a word (or a few) in the field above for inspiration."),s.a.createElement("li",null,"Hit submit and wait for Roulette to do its magic!"))))}}]),t}(n.Component),v=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container star"},s.a.createElement("span",{className:"fa fa-star "+this.props.className}))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={stars:[],full:"full",empty:"empty",half:"half"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.rating!==this.props.rating){var t=this.props.rating,a=[],n=!1;if(t%1!==0&&(n=!0),n){if(n){t-=.5;for(var c=0;c<t;++c)a.push(s.a.createElement(v,{className:this.state.full,key:t+c}));a.push(s.a.createElement(v,{className:this.state.half,key:"halfstar"})),t=5-(t+.5);for(var i=1;i<=t;++i)a.push(s.a.createElement(v,{className:this.state.empty,key:t+i}))}}else{for(var r=0;r<t;++r)a.push(s.a.createElement(v,{className:this.state.full,key:t+r}));t=5-t;for(var l=0;l<t;++l)a.push(s.a.createElement(v,{className:this.state.empty,key:t+l}))}this.setState({stars:a})}}},{key:"render",value:function(){return s.a.createElement("div",{className:"container star"},this.state.stars)}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).findBusiness=function(){if(a.props.data){var e=a.props.data,t=Math.floor(50*Math.random())+1,n=e[t];a.setState({business:n}),a.setState({name:e[t].name}),a.setState({price:e[t].price}),a.setState({rating:e[t].rating}),a.setState({category:e[t].categories}),a.setState({categoryOne:e[t].categories[0].title}),e[t].categories[1]&&a.setState({categoryTwo:e[t].categories[1].title}),a.setState({website:e[t].url}),a.setState({image:e[t].image_url})}},a.state={business:[],name:"",price:"",rating:0,category:[],categoryOne:"",categoryTwo:"",website:"",image:""},a.findBusiness=a.findBusiness.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&(this.setState({categoryTwo:""}),this.findBusiness())}},{key:"render",value:function(){return s.a.createElement("div",{className:"card cardStyle"},s.a.createElement("img",{className:"card-img-top",src:this.state.image,alt:"Card"}),s.a.createElement("div",{className:"card-body"},s.a.createElement("h4",{className:"card-title"},this.state.name),s.a.createElement(E,{rating:this.state.rating}),s.a.createElement("p",{className:"card-heading"},this.state.price," - ",this.state.categoryOne," ~ ",this.state.categoryTwo),s.a.createElement("a",{href:this.state.website,className:"btn btn-outline-light stretched-link",target:"blank"},"View on Yelp!")))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).callback=function(e){a.setState({data:e})},a.callbackTwo=function(e){a.setState({isHidden:e})},a.state={data:[],total:"",longitude:0,latitude:0,isHidden:!0},a.callback=a.callback.bind(Object(p.a)(a)),a.callbackTwo=a.callbackTwo.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.ipdata.co/?api-key=e34d6e979258f05e6678a6e563a0eb5076f2a7c8fbc26327215ec385").then((function(e){return e.json()})).then((function(e){var a=e.latitude,n=e.longitude;t.setState({latitude:a}),t.setState({longitude:n})})).catch((function(e){console.log("Looks like there was a problem: \n ".concat(e))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid cont"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md header"},s.a.createElement("h1",null,"Welcome to Yelp Roulette!",s.a.createElement("span",{role:"img","aria-label":"taco"},"\ud83c\udf2e")))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md"}),s.a.createElement("div",{className:"col-md left"},s.a.createElement(g,{isHidden:this.state.isHidden,longitude:this.state.longitude,latitude:this.state.latitude,callback:this.callback,callbackTwo:this.callbackTwo})),s.a.createElement("div",{className:"col-md right"},this.state.isHidden&&s.a.createElement("div",{className:"card cardStyle"},s.a.createElement("h4",{className:"cardPlaceholder"},"Restaurant Incoming...")),!this.state.isHidden&&s.a.createElement(y,{data:this.state.data})),s.a.createElement("div",{className:"col-md"})))}}]),t}(n.Component);i.a.render(s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(O,null)))),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.c43c89b6.chunk.js.map